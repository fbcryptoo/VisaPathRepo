<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>VisaPath – Do I Need a Visa?</title>
  <meta name="description" content="Do I need a visa? Use VisaPath’s smart visa checker to find out instantly. Search by nationality and destination for up-to-date visa requirements, including e-visas, eTAs, ESTA, and visa-free entry.">
  <link rel="icon" href="favicon.ico">
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      background: #f4f7fa;
      color: #333;
    }
    header {
      background-color: #0070f3;
      color: white;
      padding: 2rem 1rem;
      text-align: center;
      font-size: 1.6rem;
      font-weight: bold;
    }
    .container {
      max-width: 700px;
      margin: 2rem auto;
      padding: 1rem;
      background: white;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    }
    label {
      display: block;
      margin-top: 1rem;
      font-weight: bold;
    }
    select, button {
      width: 100%;
      padding: 0.75rem;
      font-size: 1rem;
      margin-top: 0.3rem;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    button {
      background-color: #0070f3;
      color: white;
      font-weight: bold;
      margin-top: 1rem;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    button:hover {
      background-color: #0059c1;
    }
    .result {
      margin-top: 2rem;
      padding: 1.5rem;
      background: #f0faff;
      border-left: 4px solid #0070f3;
      border-radius: 6px;
    }
    .result a {
      display: inline-block;
      margin-top: 0.5rem;
      color: #0070f3;
      font-weight: bold;
      text-decoration: none;
    }
    footer {
      margin-top: 4rem;
      text-align: center;
      font-size: 0.9rem;
      color: #888;
    }
  </style>
</head>
<body>

  <header>
    VisaPath – Do I Need a Visa?
  </header>

  <div class="container">
    <label for="nationality">Your nationality:</label>
    <select id="nationality"></select>

    <label for="destination">Destination country:</label>
    <select id="destination"></select>

    <button onclick="checkVisa()">Check Visa Requirement</button>

    <div id="visa-result" class="result" style="display:none;"></div>
  </div>

  <footer>
    &copy; 2025 VisaPath. All rights reserved.
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script>
    let visaData = {};

    function loadVisaData() {
      Papa.parse('combined_passport_data_with_guidance.csv', {
        header: true,
        download: true,
        complete: function(results) {
          const data = results.data;
          const countries = new Set();

          data.forEach(row => {
            const key = `${row.Passport}→${row.Destination}`;
            visaData[key] = row;

            countries.add(row.Passport);
            countries.add(row.Destination);
          });

          const sortedCountries = [...countries].sort();
          const natSelect = document.getElementById('nationality');
          const destSelect = document.getElementById('destination');

          sortedCountries.forEach(c => {
            natSelect.add(new Option(c, c));
            destSelect.add(new Option(c, c));
          });
        }
      });
    }

    function checkVisa() {
      const from = document.getElementById('nationality').value;
      const to = document.getElementById('destination').value;
      const key = `${from}→${to}`;
      const resultDiv = document.getElementById('visa-result');
      const data = visaData[key];

      if (!data) {
        resultDiv.innerHTML = `<strong>${from} → ${to}</strong><br>⏳ Information for this combination is not available yet.`;
        resultDiv.style.display = 'block';
        return;
      }

      let message = `<strong>${from} → ${to}</strong><br>`;
      const status = data.Requirement.trim().toLowerCase();
      const link = data.ETA_Link?.trim();
      const guidance = data.Guidance?.trim();

      if (status === "visa required") {
        message += "You need to apply for a visa before traveling.";
        if (guidance) message += `<br>${guidance}`;
      } else if (["e-visa", "eta", "esta"].includes(status)) {
        message += `You need to apply for an ${status.toUpperCase()}.`;
        if (guidance) message += `<br>${guidance}`;
        if (link) message += `<br><a href="${link}" target="_blank">Apply here</a>`;
      } else if (status.match(/^\d+\s*days?/)) {
        message += `You can enter without a visa for up to ${status}.`;
        if (guidance) message += `<br>${guidance}`;
      } else {
        message += `${status.charAt(0).toUpperCase() + status.slice(1)}.`;
        if (guidance) message += `<br>${guidance}`;
      }

      resultDiv.innerHTML = message;
      resultDiv.style.display = 'block';
    }

    loadVisaData();
  </script>
</body>
</html>
